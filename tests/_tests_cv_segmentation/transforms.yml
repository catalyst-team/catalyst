shared:
  image_size: &image_size 224
  resize_size: &resize_size 336 # int(image_size * 1.5)

stages:
  transform_params:
    _key_value: True

    train:
      _target_:  A.Compose
      transforms:
        - _target_:  A.SmallestMaxSize # also `albu.SmallestMaxSize` is allowed
          max_size: *resize_size
          p: 1.0
        - _target_:  A.RandomCrop
          height: *image_size
          width: *image_size
          p: 1.0
        - _target_:  A.RandomRotate90
        - _target_:  A.Cutout
        - _target_:  A.RandomBrightnessContrast
          brightness_limit: 0.2
          contrast_limit: 0.2
          p: 0.3
        - _target_:  A.GridDistortion
          p: 0.3
        - _target_:  A.HueSaturationValue
          p: 0.3
        - _target_:  A.Normalize
        - _target_:  A.ToTensor
    valid:
      _target_:  A.Compose
      transforms:
        - _target_:  A.CenterCrop
          height: *image_size
          width: *image_size
          p: 1.0
        - _target_:  A.Normalize
        - _target_:  A.ToTensor
