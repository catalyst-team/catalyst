shared:
  image_size: &image_size 224
  resize_size: &resize_size 336 # int(image_size * 1.5)

stages:
  transform_params:
    _key_value: True

    train:
      name: A.Compose
      transforms:
        - name: A.SmallestMaxSize # also `albu.SmallestMaxSize` is allowed
          max_size: *resize_size
          p: 1.0
        - name: A.RandomCrop
          height: *image_size
          width: *image_size
          p: 1.0
        - name: A.RandomRotate90
        - name: A.Cutout
        - name: A.RandomBrightnessContrast
          brightness_limit: 0.2
          contrast_limit: 0.2
          p: 0.3
        - name: A.GridDistortion
          p: 0.3
        - name: A.HueSaturationValue
          p: 0.3
        - name: A.Normalize
        - name: A.ToTensor
    valid:
      name: A.Compose
      transforms:
        - name: A.CenterCrop
          height: *image_size
          width: *image_size
          p: 1.0
        - name: A.Normalize
        - name: A.ToTensor
